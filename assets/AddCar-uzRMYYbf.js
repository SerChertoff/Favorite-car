import{d as S,z as k,r as u,m as C,n as A,c as f,b as o,p as N,f as x,t as T,q as s,v as n,s as b,e as y,g as D,w as B,h as M,i as j,a as R,A as Y,k as g,_ as z}from"./index-CixOLOK7.js";const E={class:"add-car"},F={class:"container"},I={key:0,class:"error"},L={key:1,class:"success"},$={class:"form-grid"},G={class:"form-group"},H={class:"form-group"},J={class:"form-group"},K=["max"],O={class:"form-group"},P={class:"form-group"},Q={class:"form-group"},W={class:"form-group"},X={class:"form-group"},Z={class:"form-group"},_={class:"form-group"},h={class:"form-group"},ee={class:"form-group full-width"},oe={class:"form-group full-width"},te={class:"form-actions"},le=["disabled"],se=S({__name:"AddCar",setup(ne){const U=Y(),c=k(),d=u(!1),a=u(""),r=u(!1),p=u(""),V=C(()=>new Date().getFullYear()),t=A({brand:"",model:"",year:V.value,price:0,mileage:0,fuelType:"",transmission:"",bodyType:"",color:"",engineVolume:0,description:"",location:""});async function q(){var m,e;if(!c.isAuthenticated){a.value="Необходимо войти в систему";return}if(!t.fuelType||!t.transmission||!t.bodyType){a.value="Пожалуйста, заполните все обязательные поля";return}d.value=!0,a.value="",r.value=!1;try{const i=p.value.split(`
`).map(v=>v.trim()).filter(v=>v.length>0),l={brand:t.brand,model:t.model,year:t.year,price:t.price,mileage:t.mileage,fuelType:t.fuelType,transmission:t.transmission,bodyType:t.bodyType,color:t.color,engineVolume:t.engineVolume,description:t.description,location:t.location,images:i},w=await R.createCar(l);r.value=!0,setTimeout(()=>{U.push(`/autos/${w.id}`)},1500)}catch(i){a.value=((e=(m=i.response)==null?void 0:m.data)==null?void 0:e.message)||"Не удалось добавить автомобиль. Попробуйте позже."}finally{d.value=!1}}return(m,e)=>{const i=j("router-link");return g(),f("div",E,[o("div",F,[e[30]||(e[30]=o("h1",{class:"page-title"},"Добавить автомобиль",-1)),o("form",{onSubmit:N(q,["prevent"]),class:"add-car-form card"},[a.value?(g(),f("div",I,T(a.value),1)):x("",!0),r.value?(g(),f("div",L,"Автомобиль успешно добавлен!")):x("",!0),o("div",$,[o("div",G,[e[13]||(e[13]=o("label",null,"Марка *",-1)),s(o("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>t.brand=l),type:"text",class:"input",required:""},null,512),[[n,t.brand]])]),o("div",H,[e[14]||(e[14]=o("label",null,"Модель *",-1)),s(o("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>t.model=l),type:"text",class:"input",required:""},null,512),[[n,t.model]])]),o("div",J,[e[15]||(e[15]=o("label",null,"Год выпуска *",-1)),s(o("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>t.year=l),type:"number",class:"input",min:1900,max:V.value+1,required:""},null,8,K),[[n,t.year,void 0,{number:!0}]])]),o("div",O,[e[16]||(e[16]=o("label",null,"Цена (₽) *",-1)),s(o("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>t.price=l),type:"number",class:"input",min:"0",required:""},null,512),[[n,t.price,void 0,{number:!0}]])]),o("div",P,[e[17]||(e[17]=o("label",null,"Пробег (км) *",-1)),s(o("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>t.mileage=l),type:"number",class:"input",min:"0",required:""},null,512),[[n,t.mileage,void 0,{number:!0}]])]),o("div",Q,[e[19]||(e[19]=o("label",null,"Тип топлива *",-1)),s(o("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>t.fuelType=l),class:"input",required:""},[...e[18]||(e[18]=[y('<option value="" data-v-ebdf6d41>Выберите</option><option value="бензин" data-v-ebdf6d41>Бензин</option><option value="дизель" data-v-ebdf6d41>Дизель</option><option value="электричество" data-v-ebdf6d41>Электричество</option><option value="гибрид" data-v-ebdf6d41>Гибрид</option>',5)])],512),[[b,t.fuelType]])]),o("div",W,[e[21]||(e[21]=o("label",null,"КПП *",-1)),s(o("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>t.transmission=l),class:"input",required:""},[...e[20]||(e[20]=[y('<option value="" data-v-ebdf6d41>Выберите</option><option value="механика" data-v-ebdf6d41>Механика</option><option value="автомат" data-v-ebdf6d41>Автомат</option><option value="робот" data-v-ebdf6d41>Робот</option><option value="вариатор" data-v-ebdf6d41>Вариатор</option>',5)])],512),[[b,t.transmission]])]),o("div",X,[e[23]||(e[23]=o("label",null,"Тип кузова *",-1)),s(o("select",{"onUpdate:modelValue":e[7]||(e[7]=l=>t.bodyType=l),class:"input",required:""},[...e[22]||(e[22]=[y('<option value="" data-v-ebdf6d41>Выберите</option><option value="седан" data-v-ebdf6d41>Седан</option><option value="хэтчбек" data-v-ebdf6d41>Хэтчбек</option><option value="универсал" data-v-ebdf6d41>Универсал</option><option value="внедорожник" data-v-ebdf6d41>Внедорожник</option><option value="купе" data-v-ebdf6d41>Купе</option><option value="кабриолет" data-v-ebdf6d41>Кабриолет</option>',7)])],512),[[b,t.bodyType]])]),o("div",Z,[e[24]||(e[24]=o("label",null,"Цвет *",-1)),s(o("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>t.color=l),type:"text",class:"input",required:""},null,512),[[n,t.color]])]),o("div",_,[e[25]||(e[25]=o("label",null,"Объем двигателя (л) *",-1)),s(o("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>t.engineVolume=l),type:"number",class:"input",step:"0.1",min:"0",required:""},null,512),[[n,t.engineVolume,void 0,{number:!0}]])]),o("div",h,[e[26]||(e[26]=o("label",null,"Город *",-1)),s(o("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>t.location=l),type:"text",class:"input",required:""},null,512),[[n,t.location]])]),o("div",ee,[e[27]||(e[27]=o("label",null,"Описание",-1)),s(o("textarea",{"onUpdate:modelValue":e[11]||(e[11]=l=>t.description=l),class:"input",rows:"5",placeholder:"Опишите состояние автомобиля, историю обслуживания и т.д."},null,512),[[n,t.description]])]),o("div",oe,[e[28]||(e[28]=o("label",null,"URL изображений (по одному на строку)",-1)),s(o("textarea",{"onUpdate:modelValue":e[12]||(e[12]=l=>p.value=l),class:"input",rows:"3",placeholder:`https://example.com/image1.jpg
https://example.com/image2.jpg`},null,512),[[n,p.value]])])]),o("div",te,[o("button",{type:"submit",class:"btn btn-primary",disabled:d.value},T(d.value?"Добавление...":"Добавить автомобиль"),9,le),D(i,{to:"/autos",class:"btn btn-outline"},{default:B(()=>[...e[29]||(e[29]=[M("Отмена",-1)])]),_:1})])],32)])])}}}),ie=z(se,[["__scopeId","data-v-ebdf6d41"]]);export{ie as default};
